<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<title>Controller</title>
		<link rel="stylesheet" type="text/css" href="./css/controller.css" />
		<script src="./js/_jquery1102.min.js" defer></script>
		<script src="./config/controller.keyboard.js" defer></script>
		<script src="./js/controller.gamepad.js" defer></script>
		<script src="./js/controller.tester.js" defer></script>
		<script src="./js/controller.js" defer></script>
	</head>
	<body>
		<div class="container" id="gamepads">
			<div class="template">
				<div class="disconn">
					<div><p>Disconnected</p></div>
				</div>
				<div class="triggers">
					<span class="trigger left" data-name="button-left-shoulder-bottom"></span>
					<span class="trigger right" data-name="button-right-shoulder-bottom"></span>
					<span class="trigger-button left" data-name="button-left-shoulder-bottom-digital"></span>
					<span class="trigger-button right" data-name="button-right-shoulder-bottom-digital"></span>
				</div>
				<div class="bumpers">
					<span class="bumper left" data-name="button-left-shoulder-top"></span>
					<span class="bumper right" data-name="button-right-shoulder-top"></span>
				</div>
				<div class="touchpad" data-name="touch-pad"></div>
				<div class="quadrant"></div>
				<div class="meta" data-name="button-meta"></div>
				<div class="arrows">
					<span class="back" data-name="button-select"></span>
					<span class="start" data-name="button-start"></span>
				</div>
				<div class="abxy">
					<span class="button a" data-name="button-1"></span>
					<span class="button b" data-name="button-2"></span>
					<span class="button x" data-name="button-3"></span>
					<span class="button y" data-name="button-4"></span>
				</div>
				<div class="sticks">
					<span class="stick left" data-name="stick-1"></span>
					<span class="stick right" data-name="stick-2"></span>
				</div>
				<div class="wheels">
					<span class="wheel left" data-name="stick-1-wheel"></span>
					<span class="wheel right" data-name="stick-2-wheel"></span>
				</div>
				<div class="dpad">
					<span class="face up" data-name="button-dpad-top"></span>
					<span class="face down" data-name="button-dpad-bottom"></span>
					<span class="face left" data-name="button-dpad-left"></span>
					<span class="face right" data-name="button-dpad-right"></span>
				</div>
				<div class="fstick" data-name="arcade-stick"></div>
			</div>
			<div class="controller xbox disconnected" id="gamepad-1"></div>
			<div class="controller xbox disconnected" id="gamepad-2"></div>
			<div class="controller xbox disconnected" id="gamepad-3"></div>
			<div class="controller xbox disconnected" id="gamepad-4"></div>
			<div class="controller xbox disconnected" id="gamepad-9"></div>
		</div>
		<div class="navbar hide-me">
			<div class="content">
				<div class="left">
					<a href="#menu" title="Menu"><i class="fa fa-bars menu-button"></i></a>
				</div>
				<div class="obs">
					<a href="#obs" class="btn">Use with OBS here!</a>
				</div>
				<div class="center pselect">
					<div class="left">
						<span>Player:</span>
						<select class="player" id="pselect" title="Player">
							<option>-</option>
							<option value="gamepad-1">1</option>
							<option value="gamepad-2">2</option>
							<option value="gamepad-3">3</option>
							<option value="gamepad-4">4</option>
							<option value="gamepad-9">KB</option>
						</select>
					</div>
					<div class="left skins">
						<select class="console" id="cselect" title="Console">
							<option value="xbox">Xbox (1)</option>
							<option value="ps">PlayStation (2)</option>
							<option value="fight-stick">Fight Stick (3)</option>
							<option value="gc">GameCube (4)</option>
						</select>
					</div>
				</div>
			</div>
		</div>
		<div class="navbar nocon hide-me">
			<div class="content">
				<div class="left">
					<div class="box alert">
						<span><i class="fa fa-exclamation-circle"></i></span>
					</div>
					<span>No controllers detected. Press ANY button or [F] on your keyboard.</span>
				</div>
			</div>
		</div>
		<div class="slideout-menu hide-me" id="menu">
			<a class="bglink" href="#" title="Close"><div class="modal-bg"></div></a>
			<div class="menu">
				<h1><i class="fa fa-gamepad"></i>Controller</h1>
				<a href="#info"><i class="fa fa-info-circle"></i><span>Info</span></a>
				<a href="#obs"><i class="fa fa-tv"></i><span>Use with OBS</span></a>
				<a href="#params"><i class="fa fa-file-text"></i><span>Parameters</span></a>
				<a href="#remap"><i class="fa fa-gamepad"></i><span>Custom Mapping</span></a>
			</div>
		</div>
		<div id="modals" class="hide-me">
			<div id="modal-template" class="modal-container">
				<a class="bglink" href="#" title="Close"><div class="modal-bg"></div></a>
				<div class="modal">
					<header class="minimenu">
						<a class="close" href="#">&times;</a>
						<ul>
							<li>
								<a href="#info"><i class="fa fa-info-circle"></i>Info</a>
							</li>
							<li>
								<a href="#obs"><i class="fa fa-tv"></i>Use with OBS</a>
							</li>
							<li>
								<a href="#params"><i class="fa fa-file-text"></i>Parameters</a>
							</li>
							<li>
								<a href="#remap"><i class="fa fa-gamepad"></i>Custom Mapping</a>
							</li>
						</ul>
					</header>
				</div>
			</div>
			<div id="info" class="modal-container">
				<a class="bglink" href="#" title="Close"><div class="modal-bg"></div></a>
				<div class="modal">
					<header class="minimenu"></header>
					<header>
						<h1>Information</h1>
					</header>
					<article>
						<p>"Locally, offline, reliable." - <a rel="noopener" href="https://byuwur.net" target="_blank">[Mateus] byUwUr</a></p>
						<p>Free. Forever.</p>
						<p>You can also <a rel="noopener" href="https://streamlabs.com/byuwur" target="_blank">tip</a>, <a rel="noopener" href="https://twitch.tv/byuwur" target="_blank">subscribe</a> or <a rel="noopener" href="https://paypal.me/byuwur" target="_blank">donate</a>.</p>
						<p>Download the <a rel="noopener" href="https://github.com/byuwur/stream.html/releases" target="_blank">source code</a> to use it locally and independent of online services!</p>
						<p>
							Thanks to
							<a rel="noopener" href="http://aresluna.org" target="_blank">Marcin Wichary's</a>
							<a rel="noopener" href="https://github.com/html5rocks/www.html5rocks.com/blob/master/content/tutorials/doodles/gamepad/static/gamepad-tester/gamepad.js" target="_blank">Gamepad.js</a>
							and
							<a rel="noopener" href="https://github.com/html5rocks/www.html5rocks.com/blob/master/content/tutorials/doodles/gamepad/static/gamepad-tester/tester.js" target="_blank">Tester.js</a> libraries.
						</p>
					</article>
				</div>
			</div>
			<div id="obs" class="modal-container">
				<a class="bglink" href="#" title="Close"><div class="modal-bg"></div></a>
				<div class="modal">
					<header class="minimenu"></header>
					<header>
						<h1>Use with OBS</h1>
					</header>
					<article>
						<p>You can:</p>
						<ol>
							<li>Create a new Window Capture source, then select this window.</li>
							<li>Enable "Chroma Key" in the source's filters. Set to Green.</li>
							<li>By then you should be already done!</li>
						</ol>
						<p>Or preferably:</p>
						<ol>
							<li>Create a new Browser source on OBS.</li>
							<li>Generate your URL and paste it, then click OK.</li>
							<li>By then you should be already done!</li>
						</ol>
						<hr />
						<section id="url-gen-page">
							<div id="url-gen-area">
								<div class="codeblock url-gen" id="url-gen-url" data-clipboard-text="?">Generate your URL below</div>
								<div class="codeblock url-gen" id="url-gen-copy"><span>Copy</span></div>
								<div class="codeblock url-gen" id="url-gen-reset"><span>Reset</span></div>
							</div>
							<span>Full:<span class="codeblock" id="url-gen-full">https://byuwur.net/_stream.html/controller.html</span></span>
							<form id="url-form">
								<div class="form-group">
									<label for="player-input">Player Number: </label>
									<select id="player-input" name="player">
										<option value="">None (Chroma-Key)</option>
										<option value="1">Player 1</option>
										<option value="2">Player 2</option>
										<option value="3">Player 3</option>
										<option value="4">Player 4</option>
										<option value="9">Keyboard</option>
									</select>
								</div>
								<div class="form-group">
									<label for="skin-input">Skin: </label>
									<select id="skin-input" name="skin">
										<option value="">None</option>
										<option value="1">Xbox (1)</option>
										<option value="2">PlayStation (2)</option>
										<option value="3">Fight Stick (3)</option>
										<option value="4">GameCube (4)</option>
									</select>
								</div>
								<div class="form-group"><label for="scale-input">Scale Multiplier: </label><span class="input-unit">x</span><input id="scale-input" type="text" name="scale" placeholder="0.5, 1, 2..." /></div>
								<div class="form-group"><label for="opacity-input">Opacity: </label><input id="opacity-input" type="text" name="opacity" placeholder="0.0 to 1.0" /></div>
								<div class="form-group"><label for="offset-input">Stick Offset: </label><span class="input-unit">px</span><input id="offset-input" type="text" name="offset" placeholder="0" /></div>
								<div class="form-group"><label for="deadzone-input">Deadzone: </label><input id="deadzone-input" type="text" name="deadzone" placeholder="0.0 to 1.0" /></div>
								<div class="form-group"><label for="strength-input">Disable Strength Meter: </label><input id="strength-input" type="checkbox" name="strength" value="0" /></div>
								<div class="form-group"><label for="curve-input">Enable Stick Curving: </label><input id="curve-input" type="checkbox" name="curve" value="1" /></div>
								<div class="form-group"><label for="rotation-input">Rotation Stop: </label><span class="input-unit">deg</span><input id="rotation-input" type="text" name="rotation" placeholder="0" /></div>
								<input type="text" name="mapping" id="mapping-input" hidden />
							</form>
							<span>You can <a href="#params">see all the parameters here</a>.</span>
						</section>
						<hr />
						<p>"Locally, offline, reliable." - <a rel="noopener" href="https://byuwur.net" target="_blank">[Mateus] byUwUr</a></p>
						<p>Free. Forever.</p>
						<p>You can also <a rel="noopener" href="https://streamlabs.com/byuwur" target="_blank">tip</a>, <a rel="noopener" href="https://twitch.tv/byuwur" target="_blank">subscribe</a> or <a rel="noopener" href="https://paypal.me/byuwur" target="_blank">donate</a>.</p>
						<p>Download the <a rel="noopener" href="https://github.com/byuwur/stream.html/releases" target="_blank">source code</a> to use it locally and independent of online services!</p>
					</article>
				</div>
			</div>
			<div id="params" class="modal-container">
				<a class="bglink" href="#" title="Close"><div class="modal-bg"></div></a>
				<div class="modal">
					<header class="minimenu"></header>
					<header>
						<h1>Parameters</h1>
					</header>
					<article>
						<section class="definition">
							<p>You can <a href="#obs">generate your URL here</a>!</p>
							<h2 data-param="p=">Player Number</h2>
							<div class="codeblock">/?p=1</div>
							<ul>
								<li>1</li>
								<li>0 (P1), 1 (P2), 2 (P3), 3 (P4), 9 (KB)</li>
								<li>Enables "Lite Mode", displaying only the controller.</li>
							</ul>
						</section>
						<section class="definition">
							<h2 data-param="s=">Skin ID</h2>
							<div class="codeblock">/?s=1</div>
							<ul>
								<li>1</li>
								<li>1 (Xbox), 2 (Sony), 7 (Stick), 9 (GCN)</li>
								<li>Defaults to '1' (Xbox) if set to other values.</li>
								<li>Requires a player number (<code class="codeblock">p=</code>).</li>
							</ul>
						</section>
						<section class="definition">
							<h2 data-param="sc=">Scale Multiplier</h2>
							<div class="codeblock">/?sc=1.25</div>
							<ul>
								<li>1</li>
								<li>Any number (with decimals).</li>
								<li>Negative values flip the controller.</li>
							</ul>
						</section>
						<section class="definition">
							<h2 data-param="op=">Opacity</h2>
							<div class="codeblock">/?op=1.25</div>
							<ul>
								<li>1</li>
								<li>0.0 to 1.0 (with decimals).</li>
								<li>Negative values hide the controller.</li>
							</ul>
						</section>
						<section class="definition">
							<h2 data-param="soffset=">Stick Offset (pixels)</h2>
							<div class="codeblock">/?soffset=1</div>
							<ul>
								<li>20</li>
								<li>Any number (positive).</li>
								<li>Anything beyond 25px isn't recommended.</li>
							</ul>
						</section>
						<section class="definition">
							<h2 data-param="dz=">Deadzone Radius</h2>
							<div class="codeblock">/?dz=0.25</div>
							<ul>
								<li>.25</li>
								<li>0.0 to 1.0 (with decimals).</li>
								<li>Values higher than 1 disable stick movement.</li>
							</ul>
						</section>
						<section class="definition">
							<h2 data-param="smeter=">Strength Meter (boolean)</h2>
							<div class="codeblock">/?smeter=1</div>
							<ul>
								<li>0 (false)</li>
								<li>0 (false), 1 (true)</li>
								<li>Any value other than '1' disables this setting.</li>
							</ul>
						</section>
						<section class="definition">
							<h2 data-param="curve=">Stick Curving (boolean)</h2>
							<div class="codeblock">/?curve=1</div>
							<ul>
								<li>0 (false)</li>
								<li>0 (false), 1 (true)</li>
								<li>Any value other than '1' disables this setting.</li>
							</ul>
						</section>
						<section class="definition">
							<h2 data-param="rot=">Rotational Stop (degrees)</h2>
							<div class="codeblock">/?rot=100</div>
							<ul>
								<li>120</li>
								<li>Any positive number</li>
								<li>Half the total rotational stop of the wheel.</li>
								<li>Deadzone values affect this setting. Set <code class="codeblock">dz=0</code>.</li>
							</ul>
						</section>
					</article>
				</div>
			</div>
			<div id="remap" class="modal-container">
				<a class="bglink" href="#" title="Close"><div class="modal-bg"></div></a>
				<div class="modal">
					<header class="minimenu"></header>
					<header>
						<h1>Custom Mapping</h1>
					</header>
					<article>
						<p>
							Please select the controller:
							<select id="player-base" title="Player">
								<option value="" selected>-</option>
								<option value="1" disabled>1</option>
								<option value="2" disabled>2</option>
								<option value="3" disabled>3</option>
								<option value="4" disabled>4</option>
								<option value="9" disabled>KB</option>
							</select>
						</p>
						<div id="output-display">
							<div class="raw-outputs template">
								<div>
									<h3>Axes</h3>
									<ul class="axes"></ul>
								</div>
								<div>
									<h3>Buttons</h3>
									<ul class="buttons"></ul>
								</div>
							</div>
						</div>
						<div id="mapping-config">
							<a href="#" id="prepend-mapping" class="map-control"><i class="fa fa-plus-circle"></i> Add New Mapping</a>
							<div class="template">
								<div class="form-group">
									<div class="map-message"></div>
									<input type="radio" name="targetType" value="buttons" title="Buttons" checked />
									<input type="radio" name="targetType" value="axes" title="Axes" />
									<input type="radio" name="targetType" value="dpad" title="D-Pad" />
									<input type="checkbox" class="axes-config" value="false" title="Axes configuration" />
									<select name="buttons" title="Buttons">
										<option title="Button 0" value="0">A/Cross</option>
										<option title="Button 1" value="1">B/Circle</option>
										<option title="Button 2" value="2">X/Square</option>
										<option title="Button 3" value="3">Y/Triangle</option>
										<option title="Button 4" value="4">LB/L1</option>
										<option title="Button 5" value="5">RB/R1</option>
										<option title="Button 6" value="6">LT/L2</option>
										<option title="Button 7" value="7">RT/R2</option>
										<option title="Button 8" value="8">Select/Back</option>
										<option title="Button 9" value="9">Start</option>
										<option title="Button 10" value="10">LS/L3</option>
										<option title="Button 11" value="11">RS/R3</option>
										<option title="Button 12" value="12">D-Pad Up</option>
										<option title="Button 13" value="13">D-Pad Down</option>
										<option title="Button 14" value="14">D-Pad Left</option>
										<option title="Button 15" value="15">D-Pad Right</option>
										<option title="Button 16" value="16">PS Button</option>
										<option title="Button 17" value="17">TouchPad Press</option>
									</select>
									<select name="axes" title="Axes">
										<option title="Axis 0" value="0">LS Horizontal</option>
										<option title="Axis 1" value="1">LS Vertical</option>
										<option title="Axis 2" value="2">RS Horizontal</option>
										<option title="Axis 3" value="3">RS Vertical</option>
									</select>
									<input type="checkbox" class="disable-item" value="true" title="Disable" />
									<button data-tooltip="Positive Axis" data-button="positive" data-button-type="remapping" data-object="">Click to Set</button>
									<button data-tooltip="Negative Axis" data-button="negative" data-button-type="remapping" data-object="">Click to Set</button>
									<a title="Add" href="#" class="fa fa-minus-circle del-config"></a>
									<a title="Remove" href="#" class="fa fa-plus-circle add-config"></a>
									<div class="fix-panel fix-axes">
										<span>Fix Type: </span>
										<select name="fix-type" title="Type">
											<option value="trigger">Trigger (0 to 1)</option>
											<option value="stick">Stick (-1 to 1)</option>
										</select>
										<button data-tooltip="Lowest Value" data-button="low-value" data-button-type="value">Click to Set Value</button>
										<button data-tooltip="Highest Value" data-button="high-value" data-button-type="value">Click to Set Value</button>
									</div>
									<ul class="fix-panel fix-dpad">
										<li><span>Up: </span><button data-button="up" data-button-type="value">Click to Set Value</button></li>
										<li><span>Down: </span><button data-button="down" data-button-type="value">Click to Set Value</button></li>
										<li><span>Left: </span><button data-button="left" data-button-type="value">Click to Set Value</button></li>
										<li><span>Right: </span><button data-button="right" data-button-type="value">Click to Set Value</button></li>
										<li><span>Up and Right: </span><button data-button="upright" data-button-type="value">Click to Set Value</button></li>
										<li><span>Up and Left: </span><button data-button="upleft" data-button-type="value">Click to Set Value</button></li>
										<li><span>Down and Right: </span><button data-button="downright" data-button-type="value">Click to Set Value</button></li>
										<li><span>Down and Left: </span><button data-button="downleft" data-button-type="value">Click to Set Value</button></li>
									</ul>
								</div>
							</div>
							<div id="mappings"></div>
							<div class="button-group">
								<button id="apply-mapping">Apply Mapping</button>
							</div>
						</div>
					</article>
				</div>
			</div>
		</div>
	</body>
</html>
